!function(a,b){"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof exports&&null!==exports?module.exports=b():a.DeepKeysLib=b()}(this,function(){var a,b,c;return function(d){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,b){return function(){var c=v.call(arguments,0);return"string"!=typeof c[0]&&1===c.length&&c.push(null),n.apply(d,c.concat([a,b]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var b=r[a];delete r[a],t[a]=!0,m.apply(d,b)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,b,c,f){var h,k,l,m,n,s,u=[],v=typeof c;if(f=f||a,"undefined"===v||"function"===v){for(b=!b.length&&c.length?["require","exports","module"]:b,n=0;n<b.length;n+=1)if(m=o(b[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=c?c.apply(q[a],u):void 0,a&&(h&&h.exports!==d&&h.exports!==q[a]?q[a]=h.exports:l===d&&s||(q[a]=l))}else a&&(q[a]=c)},a=b=n=function(a,b,c,e,f){if("string"==typeof a)return p[a]?p[a](b):j(o(a,b).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!b)return;b.splice?(a=b,b=c,c=null):a=d}return b=b||function(){},"function"==typeof c&&(c=e,e=f),e?m(d,a,b,c):setTimeout(function(){m(d,a,b,c)},4),n},n.config=function(a){return n(a)},a._defined=q,c=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("lib/almond.js",function(){}),c("typeOf",[],function(){return{typeOf:function(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}}}),c("notNone",[],function(){var a=function(a){return null!==a&&void 0!==a};return{notNone:a}}),c("deepSearch",["./notNone","./typeOf"],function(a,b){a=a.notNone,b=b.typeOf;var c=function(a){return a.match(/^\d+$/)?[]:{}},d=function(e,f,g){var h=f.split(/\./),i=0;for(i=0;i<h.length-1;i++){if("*"===h[i]){var j=[];if("array"===b(e)||"object"===b(e))for(var k in e){var l=d(e[k],h.slice(i+1).join("."),g);l&&Array.prototype.push.apply(j,l)}return j.length>0?j:null}if(a(e[h[i]]))e=e[h[i]];else{if(!g)return null;e[h[i]]=c(h[i+1]),e=e[h[i]]}}return""!==h[i]?("array"===b(e)&&h[i].match(/^\d*$/)||"object"===b(e))&&"*"!==h[i]?[[e,h[i],e[h[i]]]]:null:[[e,h[i],e]]};return{deepSearch:d}}),c("assignValue",["./deepSearch"],function(a){return a=a.deepSearch,{assignValue:function(b,c,d){var e=a(b,c,1);if(e)for(var f=0;f<e.length;f++)e[f][0][e[f][1]]=d}}}),c("deleteKey",["./deepSearch"],function(a){return a=a.deepSearch,{deleteKey:function(b,c){var d=a(b,c);if(d)for(var e=0;e<d.length;e++)delete d[e][0][d[e][1]]}}}),c("hierarchy",[],function(){function a(){this.hierarchy=[],this.hierarchyPlaceholder=[],this.hierarchyPlaceholders=[],this.hierarchyStr="",this.hierarchyPlaceholderStr="",this.fullHierarchyStr="",this.fullHierarchyPlaceholderStr=""}return a.prototype.replacePlaceholders=function(a){for(var b=a.slice(),c=0,d=0;c<this.hierarchy.length&&c<b.length&&d<this.hierarchyPlaceholders.length;c++)if(c===this.hierarchyPlaceholders[d].index){if(b[c]!==this.hierarchyPlaceholders[d].placeholder)break;b[c]=this.hierarchy[c],d++}else if(this.hierarchy[c]!==b[c])break;return b},a.prototype.pushToHierarchy=function(a,b){b=b||a,this.hierarchyStr=this.hierarchy.join("."),this.hierarchyPlaceholderStr=this.hierarchyPlaceholder.join("."),a!==b&&this.hierarchyPlaceholders.push({placeholder:b,index:this.hierarchyPlaceholder.length}),this.hierarchy.push(a),this.hierarchyPlaceholder.push(b),this.fullHierarchyStr=this.hierarchy.join("."),this.fullHierarchyPlaceholderStr=this.hierarchyPlaceholder.join(".")},a.prototype.popFromHierarchy=function(){this.hierarchyPlaceholders.length>0&&this.hierarchyPlaceholders[this.hierarchyPlaceholders.length-1].index===this.hierarchyPlaceholder.length-1&&this.hierarchyPlaceholders.pop(),this.hierarchy.pop(),this.hierarchyPlaceholder.pop(),this.hierarchyStr=this.hierarchy.slice(0,-1).join("."),this.hierarchyPlaceholderStr=this.hierarchyPlaceholder.slice(0,-1).join("."),this.fullHierarchyStr=this.hierarchy.join("."),this.fullHierarchyPlaceholderStr=this.hierarchyPlaceholder.join(".")},{HierarchyManager:a}}),c("diff",["./typeOf","./hierarchy"],function(a,b){a=a.typeOf;var c=function(b,d,e){var f,g=0;if("object"===a(b)){if("object"===a(d)){f={};for(var h in d){e.hierarchy.pushToHierarchy(h);var i=void 0;e.ignoreKeys[e.hierarchy.fullHierarchyStr]||(i=c(b[h],d[h],e)),e.hierarchy.popFromHierarchy(),void 0!==i&&(f[h]=i,g=1)}}}else if("array"===a(b)){if("array"===a(d)){f=[];for(var j=0;j<d.length;j++){e.hierarchy.pushToHierarchy(j,"*");var i=void 0;e.ignoreKeys[e.hierarchy.fullHierarchyStr]||(i=c(b[j],d[j],e)),e.hierarchy.popFromHierarchy(),f.push(i),void 0!==i&&(g=1)}}}else e.ignoreKeys[e.hierarchy.fullHierarchyStr]||b!==d&&(f=d,g=1);return 1===g?f:void 0};return{diff:function(a,d,e){return c(a,d,{ignoreKeys:e,hierarchy:new b.HierarchyManager})}}}),c("exists",["./deepSearch","./notNone"],function(a,b){return a=a.deepSearch,b=b.notNone,{exists:function(c,d,e){e=!!e;var f=a(c,d),g=!e;if(f)for(var h=0;h<f.length;h++){var i=b(f[h][2]);g=e&&(g||i)||!e&&g&&i}else g=!1;return g}}}),c("getValue",["./deepSearch","./notNone"],function(a,b){return a=a.deepSearch,b=b.notNone,{getValue:function(b,c){var d=a(b,c),e=[];if(d)for(var f=0;f<d.length;f++)e.push(d[f][2]);return e.length>0?e:null}}}),c("replaceKeys",["./getValue","./typeOf","./notNone"],function(a,b,c){b=b.typeOf,a=a.getValue,c=c.notNone;var d=function(e,f){if("object"===b(e)||"array"===b(e))for(var g in e)e[g]=d(e[g],f);else for(var h=e.match(/<.*?>/g)||[],i=0;i<h.length;i++){var j=a(f,h[i].replace(/<(.*)>/,"$1")),k=new RegExp(h[i].replace(/\./,"\\."));j&&c(j[0])&&(e=e.replace(k,j[0]))}return e};return{replaceKeys:d}}),c("deep-keys-lib",["./typeOf","./notNone","./deepSearch","./assignValue","./deleteKey","./diff","./exists","./getValue","./replaceKeys","./hierarchy"],function(){for(var a={},b=0;b<arguments.length;b++)for(var c in arguments[b])a[c]=arguments[b][c];return a}),b("deep-keys-lib")});