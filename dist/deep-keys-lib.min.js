!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.deep_keys_lib=b()}):"object"==typeof exports?module.exports=b():a.DeepKeysLib=b()}(this,function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;return a=function(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},b=function(a){return null!==a&&void 0!==a},i=l=function(){var c=function(a){return a.match(/^\d+$/)?[]:{}},d=function(e,f,g,h){var i=f.split(/\./),j=0;for(j=0;j<i.length-1;j++){if("*"===i[j]){var k=[];if("array"===a(e)||"object"===a(e)){var l=e;"object"===a(e)&&h&&h.length>0&&(l=h[0],h=h.splice(1));for(var m in l)if(null!==e[m]&&void 0!==e[m]){var n=d(e[m],i.slice(j+1).join("."),g,h);n&&Array.prototype.push.apply(k,n)}}return k.length>0?k:null}if(b(e[i[j]]))e=e[i[j]];else{if(!g)return null;e[i[j]]=c(i[j+1]),e=e[i[j]]}}return""!==i[j]?("array"===a(e)&&i[j].match(/^\d*$/)||"object"===a(e))&&"*"!==i[j]?[[e,i[j],e[i[j]]]]:null:[[e,i[j],e]]};return d}(),c=function(){return function(a,b,c,d,e){var f=l(a,b,!0,e);if(f)for(var g=0;g<f.length;g++)d&&null!==f[g][0][f[g][1]]&&void 0!==f[g][0][f[g][1]]||(f[g][0][f[g][1]]=c)}}(),d=function(){return function(a,b,c){var d=l(a,b,!1,c);if(d)for(var e=0;e<d.length;e++)delete d[e][0][d[e][1]]}}(),e=m=function(){function a(){this.hierarchy=[],this.hierarchyPlaceholder=[],this.hierarchyPlaceholders=[],this.hierarchyStr="",this.hierarchyPlaceholderStr="",this.fullHierarchyStr="",this.fullHierarchyPlaceholderStr=""}return a.prototype.replacePlaceholders=function(a){for(var b=a.slice(),c=0,d=0;c<this.hierarchy.length&&c<b.length&&d<this.hierarchyPlaceholders.length;c++)if(c===this.hierarchyPlaceholders[d].index){if(b[c]!==this.hierarchyPlaceholders[d].placeholder)break;b[c]=this.hierarchy[c],d++}else if(this.hierarchy[c]!==b[c])break;return b},a.prototype.pushToHierarchy=function(a,b){b=b||a,this.hierarchyStr=this.hierarchy.join("."),this.hierarchyPlaceholderStr=this.hierarchyPlaceholder.join("."),a!==b&&this.hierarchyPlaceholders.push({placeholder:b,index:this.hierarchyPlaceholder.length}),this.hierarchy.push(a),this.hierarchyPlaceholder.push(b),this.fullHierarchyStr=this.hierarchy.join("."),this.fullHierarchyPlaceholderStr=this.hierarchyPlaceholder.join(".")},a.prototype.popFromHierarchy=function(){this.hierarchyPlaceholders.length>0&&this.hierarchyPlaceholders[this.hierarchyPlaceholders.length-1].index===this.hierarchyPlaceholder.length-1&&this.hierarchyPlaceholders.pop(),this.hierarchy.pop(),this.hierarchyPlaceholder.pop(),this.hierarchyStr=this.hierarchy.slice(0,-1).join("."),this.hierarchyPlaceholderStr=this.hierarchyPlaceholder.slice(0,-1).join("."),this.fullHierarchyStr=this.hierarchy.join("."),this.fullHierarchyPlaceholderStr=this.hierarchyPlaceholder.join(".")},a}(),f=function(){var b=function(c,d,e){var f,g=0;if("object"===a(c)){if("object"===a(d)){f={};for(var h in d){e.hierarchy.pushToHierarchy(h);var i=void 0;e.ignoreKeys[e.hierarchy.fullHierarchyStr]||(i=b(c[h],d[h],e)),e.hierarchy.popFromHierarchy(),void 0!==i&&(f[h]=i,g=1)}}}else if("array"===a(c)){if("array"===a(d)){f=[];for(var j=0;j<d.length;j++){e.hierarchy.pushToHierarchy(j,"*");var i=void 0;e.ignoreKeys[e.hierarchy.fullHierarchyStr]||(i=b(c[j],d[j],e)),e.hierarchy.popFromHierarchy(),f.push(i),void 0!==i&&(g=1)}}}else e.ignoreKeys[e.hierarchy.fullHierarchyStr]||c!==d&&(f=d,g=1);return 1===g?f:void 0};return function(a,c,d){return b(a,c,{ignoreKeys:d,hierarchy:new m})}}(),j=function(){return function(a,c,d,e){d=!!d;var f=l(a,c,!1,e),g=!d;if(f)for(var h=0;h<f.length;h++){var i=b(f[h][2]);g=d&&(g||i)||!d&&g&&i}else g=!1;return g}}(),g=function(){return function(a,b,c){var d=l(a,b,!1,c),e=[];if(d)for(var f=0;f<d.length;f++)e.push(d[f][2]);return e.length>0?e:null}}(),k=function(){var c=function(d,e){if("object"===a(d)||"array"===a(d))for(var f in d)d[f]=c(d[f],e);else for(var h=d.match(/<.*?>/g)||[],i=0;i<h.length;i++){var j=g(e,h[i].replace(/<(.*)>/,"$1")),k=new RegExp(h[i].replace(/\./,"\\."));j&&b(j[0])&&(d=d.replace(k,j[0]))}return d};return c}(),h=function(e,h,i){var j={typeOf:a,notNone:b,deepSearch:l,assignValue:c,deleteKey:d,diff:f,exists:e,getValue:g,replaceKeys:h,HierarchyManager:i};return j}(j,k,e)});